# Cloudflare Workers Configuration for Privacy AMM Relayer
# See: https://developers.cloudflare.com/workers/wrangler/configuration/

name = "privacy-amm-relayer"
main = "src/index.js"
compatibility_date = "2024-01-01"

# Account ID - Set this to your Cloudflare account ID
# account_id = "your-account-id"

# Environment Variables (non-secrets)
[vars]
SOLANA_RPC_URL = "https://api.testnet.solana.com"
PROGRAM_ID = "GZfqgHqekzR4D8TAq165XB8U2boVdK5ehEEH4n7u4Xts"

# Production environment
[env.production]
name = "privacy-amm-relayer"

[env.production.vars]
SOLANA_RPC_URL = "https://api.mainnet-beta.solana.com"
# PROGRAM_ID will be different on mainnet

# Staging environment (testnet)
[env.staging]
name = "privacy-amm-relayer-staging"

[env.staging.vars]
SOLANA_RPC_URL = "https://api.testnet.solana.com"
PROGRAM_ID = "GZfqgHqekzR4D8TAq165XB8U2boVdK5ehEEH4n7u4Xts"

# KV namespace for relayer Merkle leaves
[[kv_namespaces]]
binding = "MERKLE_KV"
id = "cf7ca814363345dcb9f397afdf505693"

[[env.staging.kv_namespaces]]
binding = "MERKLE_KV"
id = "CHANGE_ME"

# Secrets (set via wrangler secret put):
# - RELAYER_SECRET_KEY: JSON array of the relayer's secret key bytes
#
# Example:
#   wrangler secret put RELAYER_SECRET_KEY
#   (paste the JSON array when prompted)
